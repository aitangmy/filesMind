# FilesMind - AI é©±åŠ¨çš„æ™ºèƒ½æ€ç»´å¯¼å›¾ç”Ÿæˆå™¨

**FilesMind** æ˜¯ä¸€ä¸ªåŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½æ–‡æ¡£åˆ†æå·¥å…·ï¼Œä¸“æ³¨äºå°†é•¿ç¯‡ PDF æ–‡æ¡£è½¬æ¢ä¸ºç»“æ„åŒ–ã€å±‚çº§æ¸…æ™°çš„æ€ç»´å¯¼å›¾ï¼ˆXMind/Markdownï¼‰ã€‚

å®ƒè§£å†³äº†ä¼ ç»Ÿ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ–¹æ¡ˆä¸­å¸¸è§çš„â€œä¸Šä¸‹æ–‡ä¸¢å¤±â€é—®é¢˜ï¼Œé€šè¿‡ç‹¬åˆ›çš„**ä¸Šä¸‹æ–‡æ„ŸçŸ¥åˆ†å—ï¼ˆContext-Aware Chunkingï¼‰**ç®—æ³•ï¼Œç¡®ä¿ç”Ÿæˆçš„å¯¼å›¾èƒ½å¤Ÿç²¾å‡†è¿˜åŸæ–‡æ¡£çš„ç« èŠ‚å±‚çº§ï¼ˆå¦‚ `ç¬¬1ç«  > 1.2èŠ‚ > 1.2.3 æ ¸å¿ƒæ¦‚å¿µ`ï¼‰ï¼Œè€Œä¸æ˜¯ç”Ÿæˆä¸€å †æ‰å¹³çš„ç¢ç‰‡èŠ‚ç‚¹ã€‚

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§ (Key Features)

* **ğŸ“„ æ·±åº¦ PDF è§£æ**: é›†æˆ `Docling` è§£æå¼•æ“ï¼Œç²¾å‡†æå–æ–‡æ¡£ä¸­çš„æ ‡é¢˜ã€æ®µè½å’Œç»“æ„ä¿¡æ¯ã€‚
* **ğŸ§  ä¸Šä¸‹æ–‡æ„ŸçŸ¥åˆ†å— (Context-Aware Chunking)**: ç‹¬å®¶å®ç°çš„â€œæ ‡é¢˜æ ˆâ€ç®—æ³•ï¼Œåœ¨åˆ‡åˆ†é•¿æ–‡æ¡£æ—¶è‡ªåŠ¨æºå¸¦çˆ¶çº§ç« èŠ‚ä¿¡æ¯ï¼Œå½»åº•è§£å†³ AI "æ–­ç« å–ä¹‰" çš„é—®é¢˜ã€‚
* **ğŸ¤– å¤šæ¨¡å‹æ”¯æŒ**: æ·±åº¦é€‚é… **DeepSeek** å’Œ **MiniMax** å¤§æ¨¡å‹ï¼Œæ”¯æŒé«˜å¹¶å‘å¼‚æ­¥å¤„ç†ã€‚
* **âš¡ å¼‚æ­¥ä»»åŠ¡æµæ°´çº¿**: åŸºäº FastAPI + Asyncio çš„åå°ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ”¯æŒå®æ—¶è¿›åº¦è¿½è¸ªã€‚
* **ğŸš€ XMind å¯¼å‡º**: ä¸€é”®ç”Ÿæˆ `.xmind` æºæ–‡ä»¶ï¼Œå¯ç›´æ¥åœ¨ XMind è½¯ä»¶ä¸­ç¼–è¾‘ã€‚

---

## ğŸ› ï¸ ç³»ç»Ÿæ¶æ„ä¸é€»è¾‘ (System Architecture)

### 1. æ•´ä½“æ¶æ„å›¾



```mermaid
graph TD
    User["ç”¨æˆ· (Browser)"] -->|ä¸Šä¼  PDF| Frontend["å‰ç«¯ (Vue3 + Tailwind)"]
    Frontend -->|API è¯·æ±‚| Backend["åç«¯ (FastAPI)"]
    
    subgraph "Backend Core"
        Backend -->|1. è§£æ| Parser["Docling Parser"]
        Backend -->|2. æ™ºèƒ½åˆ†å—| Chunker["Context-Aware Chunker"]
        Backend -->|3. AI åˆ†æ| Engine["Cognitive Engine"]
        Backend -->|4. å¯¼å‡º| Exporter["XMind Generator"]
    end
    
    Engine <-->|API è°ƒç”¨| AI["DeepSeek / MiniMax API"]
    
    Backend -->|å­˜å‚¨| FS["æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (PDF/MD)"]
    Backend -->|è®°å½•| DB["JSON History Log"]
```

### 2. æ ¸å¿ƒå¤„ç†æµç¨‹ (Core Processing Pipeline)

FilesMind çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº**å¦‚ä½•å¤„ç†é•¿æ–‡æ¡£çš„å±‚çº§ç»“æ„**ã€‚ä»¥ä¸‹æ˜¯å¤„ç†ä¸€ä¸ªæ–‡ä»¶çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant API as FastAPI åç«¯
    participant P as è§£æå™¨ (Parser)
    participant C as åˆ†å—å™¨ (Chunker)
    participant AI as Cognitive Engine
    
    U->>API: ä¸Šä¸‹æ–‡ PDF æ–‡ä»¶
    API->>P: è°ƒç”¨ process_pdf_safely()
    P-->>API: è¿”å› Markdown æ–‡æœ¬
    
    Note over API, C: å…³é”®æ­¥éª¤ï¼šä¸Šä¸‹æ–‡æ„ŸçŸ¥åˆ‡åˆ†
    API->>C: è°ƒç”¨ parse_markdown_chunks()
    loop éå†æ–‡æ¡£è¡Œ
        C->>C: ç»´æŠ¤ Header Stack (æ ‡é¢˜æ ˆ)
        C->>C: ç”Ÿæˆå¸¦ Context çš„æ•°æ®å—
    end
    C-->>API: è¿”å› List[Dict] (Content + Context)
    
    API->>AI: å¯åŠ¨ generate_mindmap_structure()
    par å¹¶å‘å¤„ç† (Map Phase)
        AI->>AI: ä»»åŠ¡ 1: åˆ†æ "ç¬¬ä¸€ç« " (Context: Root)
        AI->>AI: ä»»åŠ¡ 2: åˆ†æ "1.1 èŠ‚" (Context: ç¬¬ä¸€ç«  > 1.1)
    end
    
    AI->>AI: åˆå¹¶ç»“æœ (Reduce Phase)
    AI-->>API: è¿”å›å®Œæ•´æ€ç»´å¯¼å›¾ Markdown
    API-->>U: æ¨é€å®ŒæˆçŠ¶æ€ & å…è®¸ä¸‹è½½ XMind
```

#### ğŸ’¡ å…³é”®ç®—æ³•ï¼šæ ‡é¢˜æ ˆ (Header Stack)

ä¸ºäº†è§£å†³é•¿æ–‡æ¡£åˆ‡åˆ†åå±‚çº§ä¸¢å¤±çš„é—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸºäºæ ˆçš„ç®—æ³•ï¼š

1. **å…¥æ ˆ**ï¼šé‡åˆ° `## æ ‡é¢˜` æ—¶ï¼Œå°†å…¶å‹å…¥æ ˆä¸­ã€‚
2. **å‡ºæ ˆ**ï¼šé‡åˆ°åŒçº§æˆ–æ›´é«˜çº§æ ‡é¢˜æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œä¿æŒæ ˆå†…å§‹ç»ˆæ˜¯å½“å‰å†…å®¹çš„â€œçˆ¶çº§è·¯å¾„â€ã€‚
3. **æºå¸¦ä¸Šä¸‹æ–‡**ï¼šå½“æ–‡æ¡£å› ä¸ºé•¿åº¦è¢«åˆ‡åˆ†ï¼ˆChunkingï¼‰æ—¶ï¼Œæˆ‘ä»¬å°†å½“å‰çš„**æ•´ä¸ªæ ˆ**ï¼ˆå¦‚ `Chapter 1 > Section 2`ï¼‰ä½œä¸º `Context` å­—æ®µä¼ é€’ç»™ AIã€‚
4. **AI æŒ‡ä»¤**ï¼šPrompt ä¸­åŒ…å«å¼ºåˆ¶æŒ‡ä»¤ `"You MUST start your Mind Map output by acknowledging this hierarchy"`ï¼Œç¡®ä¿ AI ç”Ÿæˆçš„èŠ‚ç‚¹èƒ½æ­£ç¡®æŒ‚è½½ã€‚

## ğŸ’» å¿«é€Ÿå¼€å§‹ (Getting Started)

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Node.js 16+
- API Key (DeepSeek æˆ– MiniMax)

### 1. åç«¯å¯åŠ¨ (Backend)

```bash
cd backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# (å¯é€‰) é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# å¯åŠ¨æœåŠ¡
uvicorn app:app --reload --host 0.0.0.0 --port 8000
```

2. å‰ç«¯å¯åŠ¨ (Frontend)

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸ“– ä½¿ç”¨æŒ‡å— (Usage Practice)

### âš™ï¸ é…ç½® API

1. æ‰“å¼€ç½‘é¡µå³ä¸Šè§’çš„ **"è®¾ç½®" (Settings)**ã€‚
2. é€‰æ‹©æ¨¡å‹å‚å•†ï¼ˆDeepSeek æˆ– MiniMaxï¼‰ã€‚
3. è¾“å…¥æ‚¨çš„ API Keyã€‚
4. ç‚¹å‡»ä¿å­˜ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨æµ‹è¯•è¿æ¥ã€‚

### ğŸ“„ ç”Ÿæˆæ€ç»´å¯¼å›¾

1. ç‚¹å‡»é¦–é¡µçš„ **"ä¸Šä¼ æ–‡æ¡£"** åŒºåŸŸï¼Œé€‰æ‹© PDF æ–‡ä»¶ã€‚
2. ç³»ç»Ÿä¼šè‡ªåŠ¨å¼€å§‹å¤„ç†ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä»¥ä¸‹é˜¶æ®µçš„è¿›åº¦æ¡ï¼š
   - **è§£æä¸­ (Parsing)**: å°† PDF è½¬æ¢ä¸º Markdownã€‚
   - **åˆ†å—ä¸­ (Chunking)**: æ™ºèƒ½è¯†åˆ«ç« èŠ‚ç»“æ„ã€‚
   - **AI æ€è€ƒä¸­ (Analyzing)**: å¹¶å‘è°ƒç”¨å¤§æ¨¡å‹æå–çŸ¥è¯†ç‚¹ã€‚
3. å¤„ç†å®Œæˆåï¼Œç‚¹å‡»å³ä¾§çš„ **"é¢„è§ˆ"** æŸ¥çœ‹å¯¼å›¾ï¼Œæˆ–ç‚¹å‡» **"ä¸‹è½½ XMind"** è·å–æºæ–‡ä»¶ã€‚

---

ğŸ“ é¡¹ç›®ç»“æ„

```shell
filesMind/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.py                # ä¸»ç¨‹åº & ä»»åŠ¡è°ƒåº¦
â”‚   â”œâ”€â”€ cognitive_engine.py   # AI äº¤äº’ & Prompt å·¥ç¨‹ (æ ¸å¿ƒé€»è¾‘)
â”‚   â”œâ”€â”€ parser_service.py     # PDF è§£ææœåŠ¡ (Docling)
â”‚   â”œâ”€â”€ xmind_exporter.py     # XMind æ ¼å¼è½¬æ¢
â”‚   â””â”€â”€ data/                 # ä¸´æ—¶æ–‡ä»¶å­˜å‚¨
â””â”€â”€ frontend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/       # Vue ç»„ä»¶
    â”‚   â””â”€â”€ App.vue           # ä¸»ç•Œé¢
    â””â”€â”€ vite.config.js        # å‰ç«¯é…ç½®
```



## ğŸ“„ License

MIT License

```shell
### æ–‡æ¡£æ›´æ–°è¯´æ˜

1.  **Mermaid å›¾è¡¨æ”¯æŒ**ï¼šæˆ‘åœ¨æ–‡æ¡£ä¸­åµŒå…¥äº† `graph TD`ï¼ˆæ¶æ„å›¾ï¼‰å’Œ `sequenceDiagram`ï¼ˆæ—¶åºå›¾ï¼‰ã€‚å¦‚æœæ‚¨çš„ Markdown æµè§ˆå™¨ï¼ˆå¦‚ GitHub, GitLab, æˆ– VS Codeï¼‰æ”¯æŒ Mermaidï¼Œå®ƒä»¬å°†ç›´æ¥æ¸²æŸ“ä¸ºå›¾è¡¨ã€‚
2.  **é€»è¾‘å¯è§†åŒ–**ï¼š
    * **æ¶æ„å›¾**å±•ç¤ºäº†ä»ç”¨æˆ·ä¸Šä¼ åˆ°å¯¼å‡º XMind çš„å…¨é“¾è·¯ã€‚
    * **æ—¶åºå›¾**ç‰¹åˆ«å¼ºè°ƒäº† `parse_markdown_chunks` å’Œ `Cognitive Engine` ä¹‹é—´çš„äº¤äº’ï¼Œè¿™æ˜¯æ‚¨é¡¹ç›®çš„æŠ€æœ¯äº®ç‚¹ã€‚
3.  **å®è·µéƒ¨åˆ†**ï¼šå¢åŠ äº†â€œä½¿ç”¨æŒ‡å—â€å’Œâ€œé…ç½® APIâ€çš„æ­¥éª¤ï¼Œé™ä½äº†ç”¨æˆ·çš„ä¸Šæ‰‹é—¨æ§›ã€‚
```

